# LooksRare Token Distributor Gas Optimizations

Note - I didn't write my own tests for this, I just reused the ones in the `LooksRare/contracts-token-staking` repo, and turned the `gas-reporter` on.


[See here for the full tests](https://github.com/LooksRare/contracts-token-staking/blob/master/test/tokenDistributor.test.ts).

## Gas usage without optimizations

```
·-------------------------------------------|---------------------------|----------------|-----------------------------·
|           Solc version: 0.8.19            ·  Optimizer enabled: true  ·  Runs: 888888  ·  Block limit: 30000000 gas  │
············································|···························|················|······························
|  Methods                                  ·                26 gwei/gas                 ·       1980.49 eur/eth       │
·····················|······················|·············|·············|················|···············|··············
|  Contract          ·  Method              ·  Min        ·  Max        ·  Avg           ·  # calls      ·  eur (avg)  │
·····················|······················|·············|·············|················|···············|··············
|  TokenDistributor  ·  deposit             ·      67778  ·     121574  ·         93023  ·           56  ·       4.79  │
·····················|······················|·············|·············|················|···············|··············
|  TokenDistributor  ·  harvestAndCompound  ·      32446  ·     136948  ·         97881  ·           12  ·       5.04  │
·····················|······················|·············|·············|················|···············|··············
|  TokenDistributor  ·  updatePool          ·      69804  ·     104004  ·         86904  ·            4  ·       4.47  │
·····················|······················|·············|·············|················|···············|··············
|  TokenDistributor  ·  withdraw            ·      45218  ·     148043  ·         79316  ·           10  ·       4.08  │
·····················|······················|·············|·············|················|···············|··············
|  TokenDistributor  ·  withdrawAll         ·      31194  ·     152831  ·         80861  ·           19  ·       4.16  │
·····················|······················|·············|·············|················|···············|··············
|  Deployments                              ·                                            ·  % of limit   ·             │
············································|·············|·············|················|···············|··············
|  TokenDistributor                         ·    1784073  ·    1784097  ·       1784084  ·        5.9 %  ·      91.87  │
·-------------------------------------------|-------------|-------------|----------------|---------------|-------------·
```

## [G-01] 


